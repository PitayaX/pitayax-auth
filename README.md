# Pitayax Auth Service
The service to do authenticate. It bases on express + nodejs + MySql.

# How to use

## authorizate work flow

### Get page to do authorizate

Access following URL to get authorizate page.   
http://location:port/auth?response_type=&client_id=&state=&redirect_uri=   

> response_type: "code"   
> client_id: The client id of this client.   
> state: post to authorization server and will send back once authorization is done.   
> redirect_uri: recall URL after authorization is done. Used to accept authorization code.   

Once authoriztion is done. The page will redirect to redirect_uri in following format.    
http://redirect_uri?code=&state=

> code: Code generated by authorization service to get authorization key.   
> state: The statue posts to authorization server.   


### Convert authorizate code to authorizate token

Do post call to following URL with certain paramters.    
http://location:port/token    

> code: Code returned in previous step.  
> grant_type: "authorization_code"
> state: post to authorization server and will send back once authorization is done.   
> redirect_uri: recall URL after authorization is done. Used to accept authorization code.   

Response will be a json with following format.    

> {     
>   "access_token":"a645c550-75f1-4a56-8600-ef12eb04b98d",    
>   "token_type":"pitayax-auth",    
>   "expires_in":3600    
> }    


### Feed authorizate token to check access right
### Refresh authorizate token

## Start Rest Services
npm start

## How to test
npm test
